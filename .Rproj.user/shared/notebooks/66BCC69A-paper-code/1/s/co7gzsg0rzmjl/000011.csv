"0","# data for our model (remove geometry attribute) "
"0","model_data <- clustering_data %>% dplyr::select(PC1, avg_age, carownership_perc, household_median_income, food_walk, BAME_2011_perc, lsoa_code)"
"0",""
"0","my_recipe <- recipe(PC1~., data = model_data %>% dplyr::select(-geometry)) %>% "
"0","  update_role(lsoa_code, new_role = ""ID variable"") %>%"
"0","  update_role(geometry, new_role = ""ID variable"") %>%"
"0","  step_center(all_numeric_predictors()) %>% "
"0","  step_scale(all_numeric_predictors()) %>% "
"0","  step_YeoJohnson(PC1) "
"0",""
"0","# Extract the corresponding lambda value for yeo-johnson transform"
"0","lambda_yj <- prep(my_recipe)$steps[[3]]$lambdas"
"0","cat(""The optimal lambda value for Yeo-Johnson is"", lambda_yj, ""\n"")"
"1","The optimal lambda value for Yeo-Johnson is"
"1"," "
"1","0.8598949"
"1"," "
"1","
"
"0","# Prep applies the transforms to the data; juice extracts the preprocessed data; convert back to sf object"
"0","model_data_transformed <- prep(my_recipe) %>% "
"0","  juice() "
"0",""
"0","# PC1 has been transformed within ""model_data_transformed"""
"0","linear_model <- lm(PC1~., data=model_data_transformed %>% dplyr::select(-geometry,-lsoa_code))"
"0",""
"0","# Check collinearity with variance inflation factors (VIFs)"
"0","car::vif(lm_model) "
"1","                     avg_age "
"1","        households_with_cars "
"1","
"
"1","                    1.543984 "
"1","                    1.804416 "
"1","
"
"1","household_median_income_2011 "
"1","                   food_walk "
"1","
"
"1","                    1.977339 "
"1","                    1.431032 "
"1","
"
"1","              BAME_2011_perc "
"1","
"
"1","                    1.943937 "
"1","
"
